<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Terminal</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        #terminal {
            font-family: 'Fira Code', monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        #terminal-input {
            outline: none;
            background: none;
            border: none;
            color: #e5e7eb;
            width: 100%;
        }
        .command-output {
            margin-bottom: 0.5rem;
        }
        .terminal-prompt::before {
            content: '$ ';
            color: #10b981;
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 flex flex-col h-screen">
    <div class="flex flex-1 overflow-hidden">
        <!-- Terminal Section -->
        <div class="w-3/4 p-4 overflow-auto">
            <div id="terminal" class="bg-gray-800 p-4 rounded-lg shadow-lg h-full"></div>
            <div class="mt-2 terminal-prompt">
                <input id="terminal-input" type="text" class="text-gray-100" autofocus>
            </div>
        </div>
        <!-- Help Section -->
        <div class="w-1/4 p-4 bg-gray-800 overflow-auto">
            <h2 class="text-xl font-bold mb-4 text-green-400">Command Help</h2>
            <div id="help-content" class="text-sm"></div>
        </div>
    </div>

    <script>
        // File system simulation
        class FileSystem {
            constructor() {
                this.root = { '/': { type: 'dir', children: {} } };
                this.currentPath = '/';
            }

            getCurrentDir() {
                return this.getNode(this.currentPath);
            }

            getNode(path) {
                const parts = path.split('/').filter(p => p);
                let node = this.root['/'];
                for (const part of parts) {
                    if (!node.children[part] || node.type !== 'dir') return null;
                    node = node.children[part];
                }
                return node;
            }

            resolvePath(path) {
                if (path.startsWith('/')) return path;
                return this.currentPath === '/' ? `/${path}` : `${this.currentPath}/${path}`;
            }
        }

        // Command implementations
        const commands = {
            ls: (fs, args) => dir(fs, args),
            dir: (fs, args) => {
                const node = fs.getCurrentDir();
                return node ? Object.keys(node.children).join('\n') : 'dir: directory not found';
            },
            cd: (fs, args) => {
                const path = args[0] ? fs.resolvePath(args[0]) : '/';
                const node = fs.getNode(path);
                if (node && node.type === 'dir') {
                    fs.currentPath = path;
                    return '';
                }
                return `cd: ${path}: No such directory`;
            },
            pwd: (fs) => fs.currentPath,
            mkdir: (fs, args) => {
                if (!args[0]) return 'mkdir: missing operand';
                const path = fs.resolvePath(args[0]);
                const parentPath = path.substring(0, path.lastIndexOf('/'));
                const name = path.split('/').pop();
                const parent = fs.getNode(parentPath || '/');
                if (!parent) return `mkdir: ${parentPath}: No such directory`;
                if (parent.children[name]) return `mkdir: ${name}: Already exists`;
                parent.children[name] = { type: 'dir', children: {} };
                return '';
            },
            rmdir: (fs, args) => {
                if (!args[0]) return 'rmdir: missing operand';
                const path = fs.resolvePath(args[0]);
                const parentPath = path.substring(0, path.lastIndexOf('/'));
                const name = path.split('/').pop();
                const parent = fs.getNode(parentPath || '/');
                if (!parent || !parent.children[name]) return `rmdir: ${path}: No such directory`;
                if (Object.keys(parent.children[name].children).length > 0) return `rmdir: ${path}: Directory not empty`;
                delete parent.children[name];
                return '';
            },
            rm: (fs, args) => {
                if (!args[0]) return 'rm: missing operand';
                const path = fs.resolvePath(args[0]);
                const parentPath = path.substring(0, path.lastIndexOf('/'));
                const name = path.split('/').pop();
                const parent = fs.getNode(parentPath || '/');
                if (!parent || !parent.children[name]) return `rm: ${path}: No such file or directory`;
                delete parent.children[name];
                return '';
            },
            del: (fs, args) => rm(fs, args),
            cp: (fs, args) => {
                if (args.length < 2) return 'cp: missing source and destination';
                const src = fs.resolvePath(args[0]);
                const dest = fs.resolvePath(args[1]);
                const srcNode = fs.getNode(src);
                if (!srcNode) return `cp: ${src}: No such file or directory`;
                const destParentPath = dest.substring(0, dest.lastIndexOf('/'));
                const destName = dest.split('/').pop();
                const destParent = fs.getNode(destParentPath || '/');
                if (!destParent) return `cp: ${destParentPath}: No such directory`;
                destParent.children[destName] = JSON.parse(JSON.stringify(srcNode));
                return '';
            },
            copy: (fs, args) => cp(fs, args),
            mv: (fs, args) => {
                if (args.length < 2) return 'mv: missing source and destination';
                const src = fs.resolvePath(args[0]);
                const dest = fs.resolvePath(args[1]);
                const srcNode = fs.getNode(src);
                if (!srcNode) return `mv: ${src}: No such file or directory`;
                const destParentPath = dest.substring(0, dest.lastIndexOf('/'));
                const destName = dest.split('/').pop();
                const destParent = fs.getNode(destParentPath || '/');
                if (!destParent) return `mv: ${destParentPath}: No such directory`;
                destParent.children[destName] = srcNode;
                const srcParentPath = src.substring(0, src.lastIndexOf('/'));
                const srcName = src.split('/').pop();
                const srcParent = fs.getNode(srcParentPath || '/');
                delete srcParent.children[srcName];
                return '';
            },
            move: (fs, args) => mv(fs, args),
            ren: (fs, args) => mv(fs, args),
            rename: (fs, args) => mv(fs, args),
            touch: (fs, args) => {
                if (!args[0]) return 'touch: missing operand';
                const path = fs.resolvePath(args[0]);
                const parentPath = path.substring(0, path.lastIndexOf('/'));
                const name = path.split('/').pop();
                const parent = fs.getNode(parentPath || '/');
                if (!parent) return `touch: ${parentPath}: No such directory`;
                if (!parent.children[name]) parent.children[name] = { type: 'file', content: '' };
                return '';
            },
            // Add more command implementations here (simplified for brevity)
            cat: (fs, args) => {
                if (!args[0]) return 'cat: missing operand';
                const path = fs.resolvePath(args[0]);
                const node = fs.getNode(path);
                if (!node || node.type !== 'file') return `cat: ${path}: No such file or not a file`;
                return node.content || '';
            },
            // Placeholder for other commands
            ...Object.fromEntries([
                'find', 'locate', 'ln', 'type', 'less', 'more', 'nano', 'vim', 'vi', 'emacs',
                'head', 'tail', 'grep', 'egrep', 'fgrep', 'awk', 'sed', 'cut', 'sort', 'uniq',
                'wc', 'diff', 'cmp', 'comm', 'paste', 'whoami', 'uname', 'df', 'du', 'top',
                'htop', 'free', 'uptime', 'vmstat', 'iostat', 'sar', 'ps', 'pstree', 'kill',
                'killall', 'pkill', 'nice', 'renice', 'jobs', 'bg', 'fg', 'nohup', 'chmod',
                'chown', 'chgrp', 'umask', 'ping', 'curl', 'wget', 'netstat', 'ifconfig',
                'ip', 'ss', 'route', 'traceroute', 'tracert', 'nslookup', 'dig', 'host',
                'ssh', 'scp', 'rsync', 'ftp', 'sftp', 'telnet', 'arp', 'whois', 'apt',
                'apt-get', 'dpkg', 'yum', 'dnf', 'rpm', 'pacman', 'brew', 'snap', 'flatpak',
                'echo', 'export', 'unset', 'alias', 'unalias', 'history', 'man', 'info',
                'whatis', 'apropos', 'which', 'whereis', 'env', 'printenv', 'set', 'tar',
                'gzip', 'gunzip', 'bzip2', 'bunzip2', 'xz', 'unxz', 'zip', 'unzip', 'rar',
                'unrar', '7z', 'clear', 'reset', 'tput', 'sudo', 'su', 'passwd', 'chsh',
                'date', 'cal', 'time', 'cron', 'crontab', 'at', 'reboot', 'shutdown',
                'halt', 'poweroff', 'systemctl', 'service', 'journalctl', 'dmesg', 'lsblk',
                'fdisk', 'parted', 'mkfs', 'mount', 'umount', 'fsck', 'dd', 'systeminfo',
                'ver', 'wmic', 'tasklist', 'taskkill', 'schtasks', 'ipconfig', 'net',
                'netsh', 'chkdsk', 'sfc', 'dism', 'Get-Process', 'Stop-Process',
                'Get-Service', 'Start-Service', 'Stop-Service', 'Get-Content', 'Set-Content',
                'New-Item', 'Remove-Item', 'Set-Location', 'Get-Location', 'Test-Path',
                'Invoke-WebRequest', 'Start-Process', 'ConvertTo-Json', 'ConvertFrom-Json',
                'tee', 'watch', 'sleep', 'basename', 'dirname', 'realpath', 'file', 'stat',
                'md5sum', 'sha256sum', 'shasum', 'bc', 'expr', 'jq', 'xargs', 'tr', 'fold',
                'column', 'yes', 'nl', 'seq', 'shuf', 'pr', 'ulimit', 'screen', 'tmux',
                'bgzip', 'zcat', 'lscpu', 'lsusb', 'lspci', 'dmidecode', 'hostname',
                'hostnamectl', 'locale', 'localectl', 'timedatectl', 'useradd', 'userdel',
                'usermod', 'groupadd', 'groupdel', 'adduser', 'deluser', 'id', 'last',
                'w', 'who', 'logname', 'logger', 'logrotate', 'wall', 'write', 'mesg',
                'tty', 'stty', 'tsort', 'expand', 'unexpand', 'split', 'csplit', 'join',
                'sc', 'lsof', 'strace', 'ltrace', 'nc', 'socat', 'nmap', 'iftop', 'iotop',
                'pv', 'tree', 'arch', 'nproc', 'od', 'hexdump', 'strings', 'readlink',
                'mktemp', 'flock', 'chroot', 'pivot_root', 'nsenter', 'unshare', 'dtrace',
                'ktrace', 'perf', 'ethtool', 'iw', 'iwconfig', 'rfkill', 'modprobe',
                'lsmod', 'insmod', 'rmmod', 'depmod', 'sysctl', 'ul', 'prtconf', 'prtdiag',
                'getent', 'ntpdate', 'chronyc', 'hwclock', 'blkid', 'partprobe', 'tune2fs',
                'badblocks', 'e2fsck', 'resize2fs', 'mkswap', 'swapon', 'swapoff',
                'cryptsetup', 'losetup', 'mdadm', 'lvm', 'vgcreate', 'lvcreate', 'vgremove',
                'lvremove'
            ].map(cmd => [cmd, (fs, args) => `${cmd}: not implemented in this demo`]))
        };

        // Command help descriptions
        const commandHelp = {
            ls: 'List directory contents',
            dir: 'List directory contents (alias for ls)',
            cd: 'Change the current directory',
            pwd: 'Print working directory',
            mkdir: 'Create a new directory',
            rmdir: 'Remove an empty directory',
            rm: 'Remove files or directories',
            del: 'Remove files (alias for rm)',
            cp: 'Copy files or directories',
            copy: 'Copy files or directories (alias for cp)',
            mv: 'Move or rename files or directories',
            move: 'Move or rename files or directories (alias for mv)',
            ren: 'Rename files or directories (alias for mv)',
            rename: 'Rename files or directories (alias for mv)',
            touch: 'Create an empty file or update file timestamps',
            find: 'Search for files in a directory hierarchy',
            locate: 'Find files by name using a database',
            ln: 'Create hard or symbolic links',
            cat: 'Concatenate and display file contents',
            type: 'Display file contents (Windows equivalent of cat)',
            less: 'View file contents page by page',
            more: 'View file contents page by page (similar to less)',
            nano: 'Text editor',
            vim: 'Advanced text editor',
            vi: 'Text editor (simplified vim)',
            emacs: 'Extensible text editor',
            head: 'Display the first lines of a file',
            tail: 'Display the last lines of a file',
            grep: 'Search text using patterns',
            egrep: 'Extended grep with additional regex features',
            fgrep: 'Fast grep, literal string matching',
            awk: 'Pattern scanning and processing language',
            sed: 'Stream editor for filtering and transforming text',
            cut: 'Extract sections from each line of input',
            sort: 'Sort lines of text files',
            uniq: 'Remove duplicate lines from sorted input',
            wc: 'Count words, lines, and characters',
            diff: 'Compare files line by line',
            cmp: 'Compare two files byte by byte',
            comm: 'Compare two sorted files line by line',
            paste: 'Merge lines of files',
            whoami: 'Display the current user',
            uname: 'Print system information',
            df: 'Report file system disk space usage',
            du: 'Estimate file space usage',
            top: 'Display system processes',
            htop: 'Interactive process viewer',
            free: 'Display memory usage',
            uptime: 'Show system uptime',
            vmstat: 'Report virtual memory statistics',
            iostat: 'Report CPU and I/O statistics',
            sar: 'Collect and report system activity',
            ps: 'Display process status',
            pstree: 'Display processes as a tree',
            kill: 'Terminate processes by PID',
            killall: 'Terminate processes by name',
            pkill: 'Terminate processes by name (similar to killall)',
            nice: 'Run a command with modified priority',
            renice: 'Alter priority of running processes',
            jobs: 'List active jobs',
            bg: 'Run a job in the background',
            fg: 'Bring a job to the foreground',
            nohup: 'Run a command immune to hangups',
            chmod: 'Change file permissions',
            chown: 'Change file ownership',
            chgrp: 'Change file group ownership',
            umask: 'Set default file permission mask',
            ping: 'Test network connectivity',
            curl: 'Transfer data from or to a server',
            wget: 'Download files from the web',
            netstat: 'Display network connections',
            ifconfig: 'Configure network interfaces',
            ip: 'Manage network interfaces and routing',
            ss: 'Display socket statistics',
            route: 'Display or manipulate routing table',
            traceroute: 'Trace network route to a host',
            tracert: 'Trace network route (Windows equivalent of traceroute)',
            nslookup: 'Query DNS for domain information',
            dig: 'DNS lookup utility',
            host: 'DNS lookup utility (simpler than dig)',
            ssh: 'Secure shell for remote login',
            scp: 'Securely copy files over SSH',
            rsync: 'Synchronize files and directories',
            ftp: 'File Transfer Protocol client',
            sftp: 'Secure File Transfer Protocol client',
            telnet: 'Connect to remote hosts',
            arp: 'Display or modify ARP cache',
            whois: 'Query WHOIS database for domain information',
            apt: 'Package management for Debian-based systems',
            'apt-get': 'Advanced package management for Debian',
            dpkg: 'Debian package management tool',
            yum: 'Package manager for RPM-based systems',
            dnf: 'Next-generation RPM package manager',
            rpm: 'RPM package manager',
            pacman: 'Package manager for Arch Linux',
            brew: 'Package manager for macOS',
            snap: 'Package manager for universal Linux packages',
            flatpak: 'Package manager for universal Linux applications',
            echo: 'Display a line of text',
            export: 'Set environment variables',
            unset: 'Remove environment variables',
            alias: 'Create command aliases',
            unalias: 'Remove command aliases',
            history: 'Display command history',
            man: 'Display manual pages',
            info: 'Display GNU info pages',
            whatis: 'Display one-line manual page descriptions',
            apropos: 'Search manual pages for keywords',
            which: 'Locate a command',
            whereis: 'Locate binary, source, and manual pages',
            env: 'Display environment variables',
            printenv: 'Print specific environment variables',
            set: 'Set shell variables',
            tar: 'Archive files',
            gzip: 'Compress files using GZIP',
            gunzip: 'Decompress GZIP files',
            bzip2: 'Compress files using BZIP2',
            bunzip2: 'Decompress BZIP2 files',
            xz: 'Compress files using XZ',
            unxz: 'Decompress XZ files',
            zip: 'Compress files into ZIP archives',
            unzip: 'Extract ZIP archives',
            rar: 'Compress files into RAR archives',
            unrar: 'Extract RAR archives',
            '7z': 'Compress and extract 7z archives',
            clear: 'Clear the terminal screen',
            reset: 'Reset the terminal state',
            tput: 'Modify terminal settings',
            sudo: 'Execute a command as another user',
            su: 'Switch user',
            passwd: 'Change user password',
            chsh: 'Change login shell',
            date: 'Display or set system date and time',
            cal: 'Display a calendar',
            time: 'Measure command execution time',
            cron: 'Schedule tasks',
            crontab: 'Manage cron jobs',
            at: 'Schedule one-time tasks',
            reboot: 'Reboot the system',
            shutdown: 'Shut down the system',
            halt: 'Halt the system',
            poweroff: 'Power off the system',
            systemctl: 'Manage systemd services',
            service: 'Manage system services',
            journalctl: 'View system logs',
            dmesg: 'Display kernel messages',
            lsblk: 'List block devices',
            fdisk: 'Manipulate disk partition table',
            parted: 'Partition management tool',
            mkfs: 'Create a filesystem',
            mount: 'Mount a filesystem',
            umount: 'Unmount a filesystem',
            fsck: 'Check and repair a filesystem',
            dd: 'Convert and copy files',
            systeminfo: 'Display system information (Windows)',
            ver: 'Display system version (Windows)',
            wmic: 'Windows Management Instrumentation Command',
            tasklist: 'List running processes (Windows)',
            taskkill: 'Terminate processes (Windows)',
            schtasks: 'Schedule tasks (Windows)',
            ipconfig: 'Display IP configuration (Windows)',
            net: 'Manage network resources (Windows)',
            netsh: 'Configure network settings (Windows)',
            chkdsk: 'Check disk for errors (Windows)',
            sfc: 'System File Checker (Windows)',
            dism: 'Deployment Image Servicing and Management (Windows)',
            'Get-Process': 'List processes (PowerShell)',
            'Stop-Process': 'Terminate processes (PowerShell)',
            'Get-Service': 'List services (PowerShell)',
            'Start-Service': 'Start a service (PowerShell)',
            'Stop-Service': 'Stop a service (PowerShell)',
            'Get-Content': 'Read file contents (PowerShell)',
            'Set-Content': 'Write to a file (PowerShell)',
            'New-Item': 'Create files or directories (PowerShell)',
            'Remove-Item': 'Delete files or directories (PowerShell)',
            'Set-Location': 'Change directory (PowerShell)',
            'Get-Location': 'Get current directory (PowerShell)',
            'Test-Path': 'Check if a path exists (PowerShell)',
            'Invoke-WebRequest': 'Perform HTTP requests (PowerShell)',
            'Start-Process': 'Start a process (PowerShell)',
            'ConvertTo-Json': 'Convert to JSON (PowerShell)',
            'ConvertFrom-Json': 'Convert from JSON (PowerShell)',
            tee: 'Redirect output to multiple destinations',
            watch: 'Execute a command repeatedly',
            sleep: 'Pause execution for a specified time',
            basename: 'Strip directory and suffix from filenames',
            dirname: 'Strip filename from path',
            realpath: 'Resolve absolute pathname',
            file: 'Determine file type',
            stat: 'Display file or filesystem status',
            md5sum: 'Compute MD5 checksum',
            sha256sum: 'Compute SHA256 checksum',
            shasum: 'Compute SHA checksums',
            bc: 'Arbitrary-precision calculator',
            expr: 'Evaluate expressions',
            jq: 'Process JSON data',
            xargs: 'Build and execute command lines from input',
            tr: 'Translate or delete characters',
            fold: 'Wrap text to a specified width',
            column: 'Format output in columns',
            yes: 'Output a string repeatedly',
            nl: 'Number lines of files',
            seq: 'Generate a sequence of numbers',
            shuf: 'Shuffle input lines',
            pr: 'Format for printing',
            ulimit: 'Set or report user resource limits',
            screen: 'Terminal multiplexer',
            tmux: 'Terminal multiplexer',
            bgzip: 'Compress files for tabix indexing',
            zcat: 'Display compressed files',
            lscpu: 'Display CPU information',
            lsusb: 'List USB devices',
            lspci: 'List PCI devices',
            dmidecode: 'Display hardware information',
            hostname: 'Display or set system hostname',
            hostnamectl: 'Control system hostname',
            locale: 'Display locale settings',
            localectl: 'Control system locale',
            timedatectl: 'Control system time and date',
            useradd: 'Add a new user',
            userdel: 'Delete a user',
            usermod: 'Modify a user account',
            groupadd: 'Add a new group',
            groupdel: 'Delete a group',
            adduser: 'Add a user (interactive)',
            deluser: 'Delete a user (interactive)',
            id: 'Display user and group information',
            last: 'Show recent logins',
            w: 'Show who is logged in',
            who: 'Show who is logged in',
            logname: 'Print login name',
            logger: 'Log messages to system log',
            logrotate: 'Rotate log files',
            wall: 'Send message to all users',
            write: 'Send message to a user',
            mesg: 'Control write access to terminal',
            tty: 'Print terminal name',
            stty: 'Set terminal settings',
            tsort: 'Perform topological sort',
            expand: 'Convert tabs to spaces',
            unexpand: 'Convert spaces to tabs',
            split: 'Split a file into pieces',
            csplit: 'Split a file based on context',
            join: 'Join lines of two files',
            sc: 'Spreadsheet calculator',
            lsof: 'List open files',
            strace: 'Trace system calls',
            ltrace: 'Trace library calls',
            nc: 'Netcat, network utility',
            socat: 'Multipurpose relay',
            nmap: 'Network exploration tool',
            iftop: 'Display network bandwidth usage',
            iotop: 'Display I/O usage',
            pv: 'Monitor data through a pipeline',
            tree: 'Display directory tree',
            arch: 'Display system architecture',
            nproc: 'Display number of CPU cores',
            od: 'Dump files in octal or other formats',
            hexdump: 'Display file contents in hexadecimal',
            strings: 'Extract printable strings from files',
            readlink: 'Display symbolic link target',
            mktemp: 'Create a temporary file or directory',
            flock: 'Manage file locks',
            chroot: 'Change root directory',
            pivot_root: 'Change root filesystem',
            nsenter: 'Run program in a namespace',
            unshare: 'Run program with unshared resources',
            dtrace: 'Dynamic tracing framework',
            ktrace: 'Kernel tracing (BSD)',
            perf: 'Performance analysis tool',
            ethtool: 'Display and configure network interfaces',
            iw: 'Configure wireless devices',
            iwconfig: 'Configure wireless interfaces',
            rfkill: 'Enable or disable wireless devices',
            modprobe: 'Load kernel modules',
            lsmod: 'List loaded kernel modules',
            insmod: 'Insert a kernel module',
            rmmod: 'Remove a kernel module',
            depmod: 'Generate module dependencies',
            sysctl: 'Configure kernel parameters'
        };

        // Terminal logic
        const terminal = document.getElementById('terminal');
        const input = document.getElementById('terminal-input');
        const helpContent = document.getElementById('help-content');
        const fs = new FileSystem();
        let commandHistory = [];
        let historyIndex = -1;

        // Populate help section
        helpContent.innerHTML = Object.entries(commandHelp)
            .map(([cmd, desc]) => `<div class="mb-2"><strong class="text-green-400">${cmd}</strong>: ${desc}</div>`)
            .join('');

        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                const command = input.value.trim();
                if (command) {
                    commandHistory.push(command);
                    historyIndex = commandHistory.length;
                    const [cmd, ...args] = command.split(' ').filter(Boolean);
                    const output = commands[cmd] ? commands[cmd](fs, args) : `${cmd}: command not found`;
                    terminal.innerHTML += `<div class="command-output"><span class="text-green-400">$ ${command}</span><br>${output}</div>`;
                    terminal.scrollTop = terminal.scrollHeight;
                    input.value = '';
                }
            } else if (e.key === 'ArrowUp') {
                if (historyIndex > 0) {
                    historyIndex--;
                    input.value = commandHistory[historyIndex] || '';
                }
            } else if (e.key === 'ArrowDown') {
                if (historyIndex < commandHistory.length - 1) {
                    historyIndex++;
                    input.value = commandHistory[historyIndex];
                } else {
                    historyIndex = commandHistory.length;
                    input.value = '';
                }
            }
        });

        // Initialize file system with some example content
        commands.mkdir(fs, ['home']);
        commands.mkdir(fs, ['home/user']);
        commands.touch(fs, ['home/user/file.txt']);
        commands.touch(fs, ['home/user/readme.md']);
    </script>
</body>
</html>
